{
  "info": {
    "name": "TPI Backend 2025 - Con Keycloak",
    "_postman_id": "11111111-1111-1111-1111-111111111111",
    "description": "Colecci√≥n completa para el TPI Backend 2025 con autenticaci√≥n Keycloak v√≠a API Gateway.\n\n## Configuraci√≥n Inicial\n1. Importar esta colecci√≥n\n2. Configurar variables de entorno (ver pesta√±a Variables)\n3. Ejecutar 'Login via Gateway' para obtener token\n4. El token se guarda autom√°ticamente en la variable {{token}}\n\n## Roles del Sistema\n- **cliente**: Puede crear y consultar sus solicitudes\n- **admin**: Administraci√≥n completa del sistema, crear usuarios\n- **transportista**: Ver ubicaciones, registrar inicio/fin de tramos",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "gateway", "value": "http://localhost:8080", "type": "string" },
    { "key": "keycloak", "value": "http://localhost:8081", "type": "string" },
    { "key": "realm", "value": "tpi-backend", "type": "string" },
    { "key": "kc_username", "value": "cliente01", "type": "string" },
    { "key": "kc_password", "value": "Clave123", "type": "string" },
    { "key": "token", "value": "", "type": "string" },
    { "key": "solicitudId", "value": "1", "type": "string" },
    { "key": "tramoId", "value": "1", "type": "string" },
    { "key": "camionId", "value": "1", "type": "string" }
  ],
  "item": [
    {
      "name": "üîê Autenticaci√≥n",
      "item": [
        {
          "name": "Login via Gateway (Recomendado)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Guardar token autom√°ticamente",
                  "console.log('Response code:', pm.response.code);",
                  "console.log('Response body:', pm.response.text());",
                  "",
                  "if (pm.response.code === 200) {",
                  "    try {",
                  "        const jsonData = pm.response.json();",
                  "        console.log('JSON Data:', jsonData);",
                  "        ",
                  "        if (jsonData.access_token) {",
                  "            pm.collectionVariables.set('token', jsonData.access_token);",
                  "            console.log('‚úÖ Token guardado correctamente');",
                  "            console.log('Token expira en: ' + jsonData.expires_in + ' segundos');",
                  "            console.log('Primeros caracteres del token:', jsonData.access_token.substring(0, 50) + '...');",
                  "        } else {",
                  "            console.error('‚ùå No se encontr√≥ access_token en la respuesta');",
                  "        }",
                  "    } catch (e) {",
                  "        console.error('‚ùå Error al parsear JSON:', e);",
                  "    }",
                  "} else {",
                  "    console.error('‚ùå Error al obtener token. Status code:', pm.response.code);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{kc_username}}\",\n  \"password\": \"{{kc_password}}\"\n}"
            },
            "url": {
              "raw": "{{gateway}}/auth/login",
              "host": ["{{gateway}}"],
              "path": ["auth", "login"]
            },
            "description": "Login usando el endpoint del Gateway. El token se guarda autom√°ticamente.\n\n**Usuarios de prueba sugeridos:**\n- cliente01 / Clave123 (rol: cliente)\n- admin01 / Clave123 (rol: admin)\n- transportista01 / Clave123 (rol: transportista)"
          },
          "response": []
        },
        {
          "name": "Registrar Usuario (Solo Admin)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"nuevoCliente\",\n  \"email\": \"nuevo@example.com\",\n  \"password\": \"Clave123\",\n  \"firstName\": \"Nuevo\",\n  \"lastName\": \"Cliente\"\n}"
            },
            "url": {
              "raw": "{{gateway}}/auth/register",
              "host": ["{{gateway}}"],
              "path": ["auth", "register"]
            },
            "description": "Crear nuevo usuario con rol 'cliente'. **Solo usuarios con rol ADMIN pueden usar este endpoint.**\n\nEl usuario se crea autom√°ticamente en Keycloak con:\n- Rol por defecto: cliente\n- Password temporal: OFF\n- Email verificado: false"
          },
          "response": []
        },
        {
          "name": "Login Directo a Keycloak (Alternativo)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('token', jsonData.access_token);",
                  "    console.log('‚úÖ Token guardado correctamente');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/x-www-form-urlencoded" }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                { "key": "grant_type", "value": "password", "type": "text" },
                { "key": "client_id", "value": "tpi-backend-client", "type": "text" },
                { "key": "username", "value": "{{kc_username}}", "type": "text" },
                { "key": "password", "value": "{{kc_password}}", "type": "text" }
              ]
            },
            "url": {
              "raw": "{{keycloak}}/realms/{{realm}}/protocol/openid-connect/token",
              "host": ["{{keycloak}}"],
              "path": ["realms", "{{realm}}", "protocol", "openid-connect", "token"]
            },
            "description": "Login directo al token endpoint de Keycloak (m√©todo alternativo).\n\n**Nota:** Es preferible usar 'Login via Gateway'."
          },
          "response": []
        }
      ],
      "description": "Endpoints de autenticaci√≥n con Keycloak.\n\n**Flujo recomendado:**\n1. Usar 'Login via Gateway' con usuario configurado\n2. El token se guarda autom√°ticamente en {{token}}\n3. Todos los dem√°s endpoints usan ese token"
    },
    {
      "name": "üì¶ Orders Service",
      "item": [
        {
          "name": "Crear solicitud de transporte",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.id) {",
                  "        pm.collectionVariables.set('solicitudId', jsonData.id);",
                  "        console.log('‚úÖ Solicitud creada con ID: ' + jsonData.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emailCliente\": \"cliente@example.com\",\n  \"nombreCliente\": \"Cliente Demo\",\n  \"telefonoCliente\": \"123456789\",\n  \"identificadorContenedor\": \"CONT-001\",\n  \"pesoContenedorKg\": 5000,\n  \"volumenContenedorM3\": 25,\n  \"tramos\": [\n    {\n      \"orden\": 1,\n      \"tipo\": \"ORIGEN_DESTINO\",\n      \"origenNombre\": \"C√≥rdoba Capital\",\n      \"destinoNombre\": \"Buenos Aires\",\n      \"origenLatitud\": -31.4201,\n      \"origenLongitud\": -64.1888,\n      \"destinoLatitud\": -34.6037,\n      \"destinoLongitud\": -58.3816,\n      \"distanciaEstimadaKm\": 700,\n      \"duracionEstimadaHoras\": 10\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes"]
            },
            "description": "Crea una nueva solicitud de transporte.\n\n**Roles permitidos:** CLIENTE, ADMIN\n\n**Headers propagados del JWT:**\n- X-User-Id: ID del usuario autenticado\n- X-Username: Username del usuario\n- X-User-Email: Email del usuario"
          },
          "response": []
        },
        {
          "name": "üîÄ Crear solicitud con Ruta Alternativa (V√≠a Dep√≥sito)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.id) {",
                  "        pm.collectionVariables.set('solicitudId', jsonData.id);",
                  "        console.log('‚úÖ Solicitud creada con ID: ' + jsonData.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emailCliente\": \"cliente@example.com\",\n  \"nombreCliente\": \"Cliente Demo\",\n  \"telefonoCliente\": \"123456789\",\n  \"identificadorContenedor\": \"CONT-002\",\n  \"pesoContenedorKg\": 5000,\n  \"volumenContenedorM3\": 25,\n  \"tramos\": [\n    {\n      \"orden\": 1,\n      \"tipo\": \"ORIGEN_DEPOSITO\",\n      \"origenNombre\": \"C√≥rdoba Capital\",\n      \"destinoNombre\": \"Dep√≥sito Rosario\",\n      \"origenLatitud\": -31.4201,\n      \"origenLongitud\": -64.1888,\n      \"destinoLatitud\": -32.9468,\n      \"destinoLongitud\": -60.6393,\n      \"distanciaEstimadaKm\": 398.2,\n      \"duracionEstimadaHoras\": 6.64\n    },\n    {\n      \"orden\": 2,\n      \"tipo\": \"DEPOSITO_DESTINO\",\n      \"origenNombre\": \"Dep√≥sito Rosario\",\n      \"destinoNombre\": \"Buenos Aires\",\n      \"origenLatitud\": -32.9468,\n      \"origenLongitud\": -60.6393,\n      \"destinoLatitud\": -34.6037,\n      \"destinoLongitud\": -58.3816,\n      \"distanciaEstimadaKm\": 302.5,\n      \"duracionEstimadaHoras\": 5.04\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes"]
            },
            "description": "Ejemplo de c√≥mo crear una solicitud usando una ruta alternativa seleccionada.\n\n**Flujo completo:**\n1. Ejecutar 'Calcular Rutas Alternativas'\n2. Revisar las alternativas en la respuesta\n3. Seleccionar una ruta (ej: la recomendada)\n4. Copiar los tramos de esa ruta\n5. Usarlos en este request para crear la solicitud\n\n**En este ejemplo:**\n- Ruta: C√≥rdoba ‚Üí Dep√≥sito Rosario ‚Üí Buenos Aires\n- 2 tramos: ORIGEN_DEPOSITO + DEPOSITO_DESTINO\n- Distancia total: ~700 km\n- Tiempo estimado: ~11.7 horas"
          },
          "response": []
        },
        {
          "name": "Listar solicitudes",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes?estado=",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes"],
              "query": [
                { "key": "estado", "value": "", "description": "BORRADOR, PROGRAMADA, EN_TRANSITO, ENTREGADA, CANCELADA" }
              ]
            },
            "description": "Lista todas las solicitudes (admin) o solo las del usuario autenticado (cliente)."
          },
          "response": []
        },
        {
          "name": "Obtener solicitud por ID",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/{{solicitudId}}",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "{{solicitudId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar estado de solicitud",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"estado\": \"PROGRAMADA\"\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/{{solicitudId}}/estado",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "{{solicitudId}}", "estado"]
            },
            "description": "Estados: BORRADOR, PROGRAMADA, EN_TRANSITO, ENTREGADA, CANCELADA"
          },
          "response": []
        },
        {
          "name": "Asignar cami√≥n a tramo",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"camionId\": {{camionId}}\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/{{solicitudId}}/tramos/{{tramoId}}/asignacion",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "{{solicitudId}}", "tramos", "{{tramoId}}", "asignacion"]
            }
          },
          "response": []
        },
        {
          "name": "Iniciar tramo",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/{{solicitudId}}/tramos/{{tramoId}}/inicio",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "{{solicitudId}}", "tramos", "{{tramoId}}", "inicio"]
            },
            "description": "**Rol requerido:** TRANSPORTISTA"
          },
          "response": []
        },
        {
          "name": "Finalizar tramo",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/{{solicitudId}}/tramos/{{tramoId}}/fin?costoReal=15000",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "{{solicitudId}}", "tramos", "{{tramoId}}", "fin"],
              "query": [
                { "key": "costoReal", "value": "15000", "description": "Costo real del tramo (opcional)" }
              ]
            },
            "description": "**Rol requerido:** TRANSPORTISTA"
          },
          "response": []
        },
        {
          "name": "Tracking de tramos",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/{{solicitudId}}/tracking",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "{{solicitudId}}", "tracking"]
            },
            "description": "Devuelve todos los tramos de la solicitud ordenados por secuencia."
          },
          "response": []
        },
        {
          "name": "Recalcular costo estimado",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/{{solicitudId}}/recalcular",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "{{solicitudId}}", "recalcular"]
            }
          },
          "response": []
        },
        {
          "name": "üîÄ Calcular Rutas Alternativas",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"latitudOrigen\": -31.4201,\n  \"longitudOrigen\": -64.1888,\n  \"latitudDestino\": -34.6037,\n  \"longitudDestino\": -58.3816,\n  \"pesoContenedorKg\": 5000,\n  \"volumenContenedorM3\": 25,\n  \"nombreOrigen\": \"C√≥rdoba Capital\",\n  \"nombreDestino\": \"Buenos Aires\"\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/calcular-alternativas",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "calcular-alternativas"]
            },
            "description": "Calcula m√∫ltiples rutas alternativas entre origen y destino.\n\n**Funcionalidad:**\n- Genera ruta directa (sin dep√≥sitos)\n- Genera rutas con 1 dep√≥sito intermedio\n- Genera rutas con 2 dep√≥sitos intermedios\n- Calcula distancias reales usando Google Distance Matrix API\n- Calcula costos estimados para cada ruta\n- Ordena por costo (menor a mayor)\n- Marca la m√°s econ√≥mica como recomendada\n\n**Roles permitidos:** ADMIN, OPERADOR\n\n**Uso:**\n1. Ejecutar este endpoint para ver las opciones\n2. Seleccionar una ruta de las alternativas\n3. Usar los tramos de esa ruta para crear la solicitud"
          },
          "response": []
        },
        {
          "name": "üîÄ Ejemplo: C√≥rdoba ‚Üí Rosario ‚Üí Buenos Aires",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"latitudOrigen\": -31.4201,\n  \"longitudOrigen\": -64.1888,\n  \"latitudDestino\": -34.6037,\n  \"longitudDestino\": -58.3816,\n  \"pesoContenedorKg\": 8000,\n  \"volumenContenedorM3\": 30,\n  \"nombreOrigen\": \"C√≥rdoba Capital\",\n  \"nombreDestino\": \"CABA - Puerto Madero\"\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/calcular-alternativas",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "calcular-alternativas"]
            },
            "description": "Ejemplo con contenedor pesado (8 toneladas).\n\nSi existe un dep√≥sito en Rosario, deber√≠a generar:\n- Ruta 1: Directa C√≥rdoba ‚Üí Buenos Aires\n- Ruta 2: C√≥rdoba ‚Üí Dep√≥sito Rosario ‚Üí Buenos Aires\n- Otras combinaciones seg√∫n dep√≥sitos disponibles"
          },
          "response": []
        },
        {
          "name": "üîÄ Ejemplo: Ruta Corta (C√≥rdoba ‚Üí Villa Mar√≠a)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"latitudOrigen\": -31.4201,\n  \"longitudOrigen\": -64.1888,\n  \"latitudDestino\": -32.4115,\n  \"longitudDestino\": -63.2406,\n  \"pesoContenedorKg\": 3000,\n  \"volumenContenedorM3\": 15,\n  \"nombreOrigen\": \"C√≥rdoba Capital\",\n  \"nombreDestino\": \"Villa Mar√≠a\"\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/ordenes/solicitudes/calcular-alternativas",
              "host": ["{{gateway}}"],
              "path": ["api", "ordenes", "solicitudes", "calcular-alternativas"]
            },
            "description": "Ejemplo con ruta corta (~140 km).\n\nPara distancias cortas, probablemente la ruta directa sea la m√°s econ√≥mica."
          },
          "response": []
        }
      ],
      "description": "Gesti√≥n de solicitudes de transporte.\n\n**Autorizaci√≥n:**\n- CLIENTE: Puede crear y ver sus propias solicitudes\n- ADMIN: Acceso completo"
    },
    {
      "name": "üöö Fleet Service",
      "item": [
        {
          "name": "Listar camiones",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/fleet/camiones?estado=",
              "host": ["{{gateway}}"],
              "path": ["api", "fleet", "camiones"],
              "query": [
                { "key": "estado", "value": "", "description": "DISPONIBLE, OCUPADO, EN_MANTENIMIENTO" }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Camiones disponibles por capacidad",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/fleet/camiones/disponibles?peso=5000&volumen=25",
              "host": ["{{gateway}}"],
              "path": ["api", "fleet", "camiones", "disponibles"],
              "query": [
                { "key": "peso", "value": "5000" },
                { "key": "volumen", "value": "25" }
              ]
            },
            "description": "Busca camiones disponibles que soporten el peso y volumen especificados."
          },
          "response": []
        },
        {
          "name": "Crear cami√≥n",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.id) {",
                  "        pm.collectionVariables.set('camionId', jsonData.id);",
                  "        console.log('‚úÖ Cami√≥n creado con ID: ' + jsonData.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dominio\": \"AAA123\",\n  \"capacidadPesoKg\": 8000,\n  \"capacidadVolumenM3\": 40,\n  \"consumoCombustiblePorKm\": 0.35,\n  \"costoBasePorKm\": 100,\n  \"estado\": \"DISPONIBLE\"\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/fleet/camiones",
              "host": ["{{gateway}}"],
              "path": ["api", "fleet", "camiones"]
            },
            "description": "**Rol requerido:** ADMIN"
          },
          "response": []
        },
        {
          "name": "Actualizar estado de cami√≥n",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"estado\": \"DISPONIBLE\"\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/fleet/camiones/{{camionId}}/estado",
              "host": ["{{gateway}}"],
              "path": ["api", "fleet", "camiones", "{{camionId}}", "estado"]
            }
          },
          "response": []
        }
      ],
      "description": "Gesti√≥n de flota de camiones.\n\n**Rol requerido:** ADMIN"
    },
    {
      "name": "üìç Locations Service",
      "item": [
        {
          "name": "Calcular distancia (Google Maps)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"origen\": {\n    \"latitud\": -31.4201,\n    \"longitud\": -64.1888\n  },\n  \"destino\": {\n    \"latitud\": -34.6037,\n    \"longitud\": -58.3816\n  }\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/locations/distancias/calcular",
              "host": ["{{gateway}}"],
              "path": ["api", "locations", "distancias", "calcular"]
            },
            "description": "Calcula la distancia real entre dos coordenadas usando Google Maps Distance Matrix API.\n\n**Roles permitidos:** ADMIN, TRANSPORTISTA"
          },
          "response": []
        },
        {
          "name": "Listar ciudades",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/locations/ciudades",
              "host": ["{{gateway}}"],
              "path": ["api", "locations", "ciudades"]
            }
          },
          "response": []
        },
        {
          "name": "Listar provincias",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/locations/provincias",
              "host": ["{{gateway}}"],
              "path": ["api", "locations", "provincias"]
            }
          },
          "response": []
        },
        {
          "name": "Listar dep√≥sitos",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/locations/depositos",
              "host": ["{{gateway}}"],
              "path": ["api", "locations", "depositos"]
            }
          },
          "response": []
        },
        {
          "name": "Crear dep√≥sito (Ejemplo: Rosario)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Dep√≥sito Rosario\",\n  \"direccion\": \"Av. Circunvalaci√≥n 1000\",\n  \"altura\": 1000,\n  \"coordenada\": {\n    \"latitud\": -32.9468,\n    \"longitud\": -60.6393\n  }\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/locations/depositos",
              "host": ["{{gateway}}"],
              "path": ["api", "locations", "depositos"]
            },
            "description": "Crea un dep√≥sito de ejemplo en Rosario.\n\n**Rol requerido:** ADMIN\n\n**Nota:** Necesitas tener dep√≥sitos creados para que el c√°lculo de rutas alternativas genere opciones con paradas intermedias."
          },
          "response": []
        },
        {
          "name": "Crear dep√≥sito (Ejemplo: Mendoza)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Dep√≥sito Mendoza\",\n  \"direccion\": \"Ruta 40 Km 2500\",\n  \"altura\": 2500,\n  \"coordenada\": {\n    \"latitud\": -32.8895,\n    \"longitud\": -68.8458\n  }\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/locations/depositos",
              "host": ["{{gateway}}"],
              "path": ["api", "locations", "depositos"]
            },
            "description": "Crea un dep√≥sito de ejemplo en Mendoza.\n\n**Rol requerido:** ADMIN"
          },
          "response": []
        },
        {
          "name": "Crear dep√≥sito (Ejemplo: San Luis)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Dep√≥sito San Luis\",\n  \"direccion\": \"Av. Illia 500\",\n  \"altura\": 500,\n  \"coordenada\": {\n    \"latitud\": -33.2995,\n    \"longitud\": -66.3356\n  }\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/locations/depositos",
              "host": ["{{gateway}}"],
              "path": ["api", "locations", "depositos"]
            },
            "description": "Crea un dep√≥sito de ejemplo en San Luis.\n\n**Rol requerido:** ADMIN"
          },
          "response": []
        }
      ],
      "description": "Gesti√≥n de ubicaciones y c√°lculo de distancias.\n\n**Roles permitidos:** ADMIN, TRANSPORTISTA"
    },
    {
      "name": "üí∞ Pricing Service",
      "item": [
        {
          "name": "Listar tarifas base",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/pricing/tarifas/base",
              "host": ["{{gateway}}"],
              "path": ["api", "pricing", "tarifas", "base"]
            }
          },
          "response": []
        },
        {
          "name": "Crear tarifa base",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tipoCamion\": \"MEDIANO\",\n  \"rangoPesoMinKg\": 0,\n  \"rangoPesoMaxKg\": 8000,\n  \"rangoVolumenMinM3\": 0,\n  \"rangoVolumenMaxM3\": 40,\n  \"costoPorKilometro\": 150,\n  \"costoPorKilometroCombustible\": 0,\n  \"costoFijoGestion\": 50\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/pricing/tarifas/base",
              "host": ["{{gateway}}"],
              "path": ["api", "pricing", "tarifas", "base"]
            }
          },
          "response": []
        },
        {
          "name": "Calcular tarifa",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"distanciaTotalKm\": 700,\n  \"distanciaRecorridaPorCamionKm\": 700,\n  \"pesoContenedorKg\": 5000,\n  \"volumenContenedorM3\": 25,\n  \"consumoCamionLtsPorKm\": 0.35,\n  \"costoCombustiblePorLitro\": 150,\n  \"cantidadTramos\": 3,\n  \"diasTotalesEnDeposito\": 0,\n  \"recargosAplicados\": []\n}"
            },
            "url": {
              "raw": "{{gateway}}/api/pricing/calculos/tarifa",
              "host": ["{{gateway}}"],
              "path": ["api", "pricing", "calculos", "tarifa"]
            },
            "description": "Calcula el costo total del traslado."
          },
          "response": []
        },
        {
          "name": "Listar tarifas dep√≥sito",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/pricing/tarifas/depositos",
              "host": ["{{gateway}}"],
              "path": ["api", "pricing", "tarifas", "depositos"]
            }
          },
          "response": []
        },
        {
          "name": "Listar recargos",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{gateway}}/api/pricing/tarifas/recargos",
              "host": ["{{gateway}}"],
              "path": ["api", "pricing", "tarifas", "recargos"]
            }
          },
          "response": []
        }
      ],
      "description": "Gesti√≥n de tarifas y c√°lculo de costos.\n\n**Rol requerido:** ADMIN"
    },
    {
      "name": "üè• Health Checks",
      "item": [
        {
          "name": "Gateway Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{gateway}}/actuator/health",
              "host": ["{{gateway}}"],
              "path": ["actuator", "health"]
            },
            "description": "Endpoint p√∫blico para verificar el estado del Gateway."
          },
          "response": []
        }
      ]
    }
  ]
}
